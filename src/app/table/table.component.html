<h3 class="text-center">User Registration</h3>
<div class="col-md-12 bg-light text-right mb-5">
  <button type="button" style="float: right;" class="btn btn-success" [routerLink]="['/userlogin']" routerLinkActive="router-link-active" (click)="logout()" >Log out</button>
  <button type="button" style="float: right;" class="btn btn-success" [routerLink]="['/add-user']" routerLinkActive="router-link-active"  >Add User</button>
</div>
<br>
<table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Mobile No</th>
      <th>DOB</th>
      <th>Gender</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody *ngIf="persons.length != 0">
    <tr *ngFor="let person of persons">
      <td>{{person.firstName}}</td>
      <td>{{person.lastName}}</td>
      <td>{{person.email}}</td>
      <td>{{person.phoneNumber}}</td>
      <td>{{person.dob}}</td>
      <td>{{person.gender}}</td>
      <td class="d-flex justify-content-around">
        <button type="button" class="btn btn-success " (click)="openModal(editProfileModal, person.id)">Edit</button>
        <button type="button" class="btn btn-danger" (click)="openModal(template, person.id) ">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<ng-template #template>
  <div class="modal-body text-center">
    <p>Do you want to delete?</p>
    <button type="button" value="delete" class="btn btn-danger" (click)="deleteUser()" >Yes</button>
    <button type="button" class="btn btn-primary" (click)="hideModal()" >No</button>
  </div>
</ng-template>

<ng-template #editProfileModal>
  <div class="modal-body text-center">
    <p>Edit User</p>    
  <div class="modal-body">
    <form [formGroup]="editProfileForm" (ngSubmit)="editUser()">
    <div class="form-group row">
      <label for="firstName" class="col-sm-4 col-form-label">First Name</label>
      <div class="col-sm-8">
      <input type="text" class="form-control"formControlName="firstName" id="firstName">
      </div>
    </div>
    <div class="form-group row">
      <label for="lastName" class="col-sm-4 col-form-label">Last Name</label>
      <div class="col-sm-8">
      <input type="text" class="form-control" formControlName="lastName" id="lastName">
      </div>
    </div>
    <div class="form-group row">
      <label for="email" class="col-sm-4 col-form-label">Email</label>
      <div class="col-sm-8">
      <input type="email" class="form-control" formControlName="email" id="email">
      </div>
    </div>
    <div class="form-group row">
      <label for="phoneNumber" class="col-sm-4 col-form-label">Mobile Number</label>
      <div class="col-sm-8">
      <input type="text" class="form-control" formControlName="phoneNumber" id="phoneNumber">
      </div>
    </div>
    <div class="form-group row">
      <label for="dob" class="col-sm-4 col-form-label">DOB</label>
      <div class="col-sm-8">
        <input type="date" class="form-control" formControlName="dob" id="dob">
      </div>
      </div>
      <div class="form-group row">
      <label for="gender" class="col-sm-4 col-form-label">Gender</label>
      <div class="col-sm-8">
        <input type="text" class="form-control" formControlName="gender" id="gender">
      </div>
      </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="hideModal()">Close</button>
      <button type="submit" class="btn btn-primary">Save changes</button>
    </div>
    </form>
  </div>
</div>
  </ng-template>

